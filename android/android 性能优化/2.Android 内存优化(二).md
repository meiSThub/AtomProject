* 内存泄漏定位
* 内存抖动定位
* 使用轻量级数据结构
* HashMap源码分析
* Bitmap内存优化



# 一、内存泄漏定位

我们都知道，内存泄漏的根本原因就是：堆内存中的长生命周期的对象持有短生命周期对象的引用，尽管短生命周期对象已经不再需要，但是因为长生命周期对象持有它的引用而导致不能被回收。

 

内存泄漏会导致可用内存慢慢变少，让程序慢慢变卡。最终还会导致臭名昭著的oom 内存溢出。既然内存泄漏导致的问题如此严重，在开发中应该怎么排查内存泄漏问题呢？

* 观察法：

  在Android中我们执行一段代码，比如进入了一个新的页面(Activity)，这时候我们的内存使用肯定比在前一个页面大，而在界面finish返回后，如果内存没有回落，那么很有可能就是出现了内存泄漏。

  从内存监控工具中观察内存曲线，是否存在不断上升的趋势且不会在程序返回时明显回落。这种方式可以发现最基本，也是最明显的内存泄露问题，对用户价值最大，操作难度小，性价比极高。

* 内存分析工具：MAT

 

### 1、观察法：

​	当运行App之后，在AS的底部工具栏中有：Profiler，打开，选择需要观察的App进程，即可看到App的内存，CPU，网络等使用情况，这里我们选择：Memory，即内存。就可以观察到App内存的具体使用情况。

 ![image-20200728173858994](https://raw.githubusercontent.com/meiSThub/BlogImage/master/image-20200728173858994.png)

