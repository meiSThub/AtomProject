[TOC]

å°†Flutteré›†æˆåˆ°ç°æœ‰çš„Android/IOSåº”ç”¨ä¸­éœ€è¦å¦‚ä¸‹å‡ ä¸ªä¸»è¦æ­¥éª¤ï¼š

* é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª Flutter module å·¥ç¨‹ï¼Œæ³¨æ„æ˜¯ moduleå·¥ç¨‹ï¼Œè€Œä¸æ˜¯ application å·¥ç¨‹ã€‚
* ä¸ºå·²å­˜åœ¨çš„Android/IOSåº”ç”¨æ·»åŠ  Flutter module ä¾èµ–
* ç¼–å†™Dartä»£ç 
* è¿è¡Œé¡¹ç›®
* çƒ­é‡å¯/é‡æ–°åŠ è½½
* è°ƒè¯•Dartä»£ç 
* å‘å¸ƒåº”ç”¨

# ä¸€ã€åˆ›å»º Flutter module

------

åœ¨åšæ··åˆå¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª Flutter moduleã€‚ç‰¹åˆ«æ³¨æ„ æ˜¯åˆ›å»º Flutter module ï¼Œè€Œä¸æ˜¯Flutter Applicationã€‚ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼š

* ï¼ˆ1ï¼‰Flutter moduleï¼šå¯ä»¥ä½œä¸ºä¸€ä¸ª module library é›†æˆåˆ° ç°æœ‰çš„ Android åº”ç”¨ä¸­ï¼Œè€Œ Flutter Applicationä¸è¡Œã€‚
* ï¼ˆ2ï¼‰Flutter module ä¼šç”Ÿæˆ **.android** å’Œ **.ios** ç­‰éšè—æ–‡ä»¶å¤¹ï¼Œæ˜¯ä¸´æ—¶ç”Ÿæˆçš„ï¼Œåœ¨ **.android** æ–‡ä»¶ä¸­ï¼Œä¼šç”Ÿæˆæœ‰include_flutter.groovy æ–‡ä»¶ï¼›è€Œ Flutter Application å·¥ç¨‹ä¸­ï¼Œæ²¡æœ‰ **.android** å’Œ **.ios** æ–‡ä»¶å¤¹ï¼Œåªæœ‰ **android** å’Œ **ios** æ–‡ä»¶å¤¹ï¼Œæ³¨æ„å®ƒä»¬å‰é¢æ²¡æœ‰ ç‚¹ï¼ˆ.ï¼‰,ä¸æ˜¯éšè—æ–‡ä»¶ï¼Œä¹Ÿä¸æ˜¯ä¸´æ—¶æ–‡ä»¶ï¼Œæ˜¯**Flutter Application ï¼ˆçº¯Flutteråº”ç”¨**ï¼‰çš„å¿…å¤‡æ–‡ä»¶å¤¹ï¼Œåœ¨ android æ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿæ˜¯æ²¡æœ‰ include_flutter.groovy æ–‡ä»¶çš„ã€‚

åˆ›å»º Flutter module æœ‰ä¸¤ç§æ–¹å¼ï¼š

* ï¼ˆ1ï¼‰é€šè¿‡ Android Studio åœ¨Android åº”ç”¨å·¥ç¨‹ä¸­ï¼Œåˆ›å»º flutter module ã€‚
* ï¼ˆ2ï¼‰é€šè¿‡ å‘½ä»¤çš„æ–¹å¼ï¼Œåˆ›å»º flutter moduleã€‚

## 1ã€é€šè¿‡Android Studio åˆ›å»º Flutter module

åœ¨æˆ‘ä½¿ç”¨çš„ Android Studio ç‰ˆæœ¬ä¸­ï¼Œæ— æ³•é€šè¿‡Android Studio ç›´æ¥åˆ›å»º flutter module ï¼Œåªèƒ½åˆ›å»º flutter applicationï¼Œä¹‹ååœ¨é€‰æ‹©åˆ›å»º Flutter moduleã€‚å¦‚ï¼š

åªæœ‰åˆ›å»º Flutter application çš„é€‰é¡¹ï¼š

![image-20220818101056527](https://raw.githubusercontent.com/meiSThub/BlogImage/master/20222022image-20220818101056527.png)

é€‰æ‹©åˆ›å»º New Flutter Project ï¼š

![image-20220818123421117](https://raw.githubusercontent.com/meiSThub/BlogImage/master/2022image-20220818123421117.png)

è¿›å»ä¹‹åï¼Œå¯ä»¥çœ‹åˆ° åœ¨ Project Type ä¸­ï¼Œå¯ä»¥åˆ›å»º Flutter module å·¥ç¨‹ã€‚



## 2ã€é€šè¿‡å‘½ä»¤çš„æ–¹å¼ï¼Œåˆ›å»º Flutter module 

æœ€å¥½è®© flutter module å·¥ç¨‹ä¸ ç°æœ‰çš„ Android Application å·¥ç¨‹åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚

å¦‚ï¼šç°æœ‰çš„ Android åº”ç”¨å·¥ç¨‹ç›®å½•ä¸ºï¼š/Users/WorkSpace/AndroidDemo/FlutterInAndroid/myhost

* ï¼ˆ1ï¼‰åœ¨ terminal ç»ˆç«¯ä¸Šï¼Œåˆ‡æ¢ç›®å½•åˆ° ï¼š/Users/WorkSpace/AndroidDemo/FlutterInAndroid

* ï¼ˆ2ï¼‰æ‰§è¡Œ flutter module åˆ›å»ºå‘½ä»¤ï¼šflutter create -t module flutter_lib

  â€‹	flutter_lib æ˜¯å¾…åˆ›å»ºçš„ flutter module åç§°ã€‚

  ![image-20220818102648058](https://raw.githubusercontent.com/meiSThub/BlogImage/master/2022image-20220818102648058.png)

è¿™æ ·å°±åˆ›å»ºå¥½äº† flutter module å·¥ç¨‹ã€‚

ç”Ÿæˆ .android å’Œ .ios æ–‡ä»¶ï¼š

* æ‰§è¡Œå‘½ä»¤ï¼š flutter clean 
* æ‰§è¡Œå‘½ä»¤ï¼šflutter pub get 

è¿™æ ·å°±å¯ä»¥ç”Ÿäº§ä¸´æ—¶æ–‡ä»¶ã€‚

å½“ç„¶ï¼Œé€šè¿‡ Android Studio æ‰“å¼€è¯¥ flutter module å·¥ç¨‹ï¼Œä¹Ÿå¯ä»¥ç”Ÿäº§è¯¥æ–‡ä»¶ã€‚

å‚è€ƒï¼š

* [åœ¨ç°æœ‰ Android åº”ç”¨ä¸Šé«˜æ•ˆå¼€å‘ Flutter](https://medium.com/flutter-community/efficiently-develop-flutter-on-android-113176326bad)

* [Flutterå‘½ä»¤è¯¦è§£](https://www.myfreax.com/detailed-flutter-command/)

**æ³¨æ„ï¼š**

ä¹‹æ‰€ä»¥ä¼šç”Ÿæˆ .android ç›®å½•ï¼Œæ˜¯ä¸ºäº† åœ¨ flutter module å·¥ç¨‹ä¸­ï¼Œä¹Ÿèƒ½å¤Ÿå¿«é€Ÿè¿è¡Œ flutter moduleï¼Œè¿™ä¸ªæ—¶å€™ .android å°±ç›¸å½“äºæ˜¯å£³å·¥ç¨‹ã€‚

# äºŒã€ä¸ºå·²å­˜åœ¨çš„Android åº”ç”¨æ·»åŠ  Flutter module ä¾èµ–

------

åœ¨ç°æœ‰çš„ Android é¡¹ç›®ä¸­ï¼Œæ·»åŠ  Flutter module ä¾èµ–ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š

* ï¼ˆ1ï¼‰ç›´æ¥ä¾èµ– flutter module æºç ã€‚
* ï¼ˆ2ï¼‰ä¾èµ– flutter module çš„ aar æ–‡ä»¶ã€‚

ä¾èµ– flutter module çš„ aar åŒ…ï¼Œå¾ˆç®€å•ï¼Œå‘å¸ƒaar åˆ° maven ä»“åº“ï¼Œç„¶åä¾èµ–å°±å¯ä»¥äº†ï¼Œåœ¨åç»­æ–‡ç« ä¸­ä¼šä¸“é—¨ä»‹ç»ã€‚

## 1ã€flutter module æºç ä¾èµ–

è¿™é‡Œå…ˆè¯´ flutter module æºç ä¾èµ–ï¼š

æ‰“å¼€æˆ‘ä»¬çš„Android é¡¹ç›®çš„ settings.gradle æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```groovy

setBinding(new Binding([gradle: this]))
evaluate(new File(
        settingsDir.parentFile,// å½“å‰å·¥ç¨‹çš„çˆ¶è·¯å¾„
        'flutter_module/.android/include_flutter.groovy' // æŒ‡å®š flutter module ä¸­ .android æ–‡ä»¶å¤¹ä¸‹çš„ include_flutter.groovy æ–‡ä»¶ã€‚
))
//include ':flutter_module'
//project(':flutter_module').projectDir = new File('../flutter_module')
```

**ï¼ˆ1ï¼‰**setBinding ä¸ evaluate å…è®¸ Flutter æ¨¡å—åŒ…æ‹¬å®ƒè‡ªå·±åœ¨å†…çš„ä»»ä½•Flutteræ’ä»¶ï¼Œåœ¨ settings.gradle ä¸­ä»¥ ç±»ä¼¼ï¼š**:flutter**ã€**package_info**ã€**:video_player** çš„æ–¹å¼å­˜åœ¨ã€‚

å³ flutter module å·¥ç¨‹å¯èƒ½ä¹Ÿä¼šä¾èµ–ä¸€äº›ç¬¬ä¸‰æ–¹çš„ plugin å’Œ library ï¼Œå¦‚æœä¸åŠ  setBinding å’Œ evaluate ä»£ç ï¼Œåˆ™å½“å‰ æ··åˆå·¥ç¨‹æ— æ³• å¼•ç”¨åˆ°è¿™äº› plugin å’Œ library ï¼ŒåŠ ä¸Šä¹‹åå°±å¯ä»¥å¼•ç”¨åˆ°äº†ã€‚

ï¼ˆ2ï¼‰ã€åœ¨ AGP 7.0 ä¹‹åï¼ŒBinding ç±»å¯èƒ½ä¼šæŠ¥çº¢ï¼Œä¼šæç¤ºä½ è®©ä½ å¯¼å…¥è¯¥ç±»ï¼Œè¿™é‡Œä¸è¦å¯¼å…¥è¯¥ç±»ï¼Œå¦åˆ™ä¼šæ— æ³•å˜å¼‚é€šè¿‡ã€‚

ï¼ˆ3ï¼‰**Caused by: java.io.FileNotFoundException**:XXX/flutter_module/.android/include_flutter.groovy

å¦‚æœç¼–è¯‘çš„æ—¶å€™æŠ¥ï¼šæ‰¾ä¸åˆ° include_flutter.groovy æ–‡ä»¶ï¼Œåˆ™éœ€è¦åšå¦‚ä¸‹æ£€æŸ¥ï¼š

* flutter å·¥ç¨‹ æ˜¯å¦æ˜¯ flutter module å·¥ç¨‹ï¼Œåªèƒ½æ˜¯ flutter module å·¥ç¨‹ã€‚
* æ˜¯å¦æœ‰ç”Ÿæˆéšè—æ–‡ä»¶ ï¼š.android
* .android ä¸­ æ˜¯å¦æœ‰ include_flutter.groovy æ–‡ä»¶
* è·¯å¾„æ˜¯å¦æ­£ç¡®

å…¶ä¸­'flutter_lib/.android/include_flutter.groovy'æ˜¯ flutter module ä¸­ include_flutter.groovy çš„æ–‡ä»¶è·¯å¾„ï¼Œç”±äºflutter module æ‰€åœ¨çš„ä½ç½®ä¸ä¸€å®šåœ¨Androidé¡¹ç›®ä¸­ï¼Œåªè¦è¿™ä¸ª**è·¯å¾„å†™å¯¹**ï¼Œflutter moduleåœ¨ç”µè„‘ä¸­**ä»»æ„ä½ç½®**éƒ½å¯ä»¥ã€‚

å®Œæˆä¸Šé¢çš„å·¥ä½œä¹‹åï¼Œå°±åœ¨ç°æœ‰å·¥ç¨‹ä¸­å¼•å…¥äº† flutter module æ¨¡å—ã€‚è¿™æ ·å°±å¯ä»¥ æŠŠ flutter module å·¥ç¨‹æ·»åŠ åˆ° Androidå·¥ç¨‹äº†ã€‚

åœ¨Android Applicationæ¨¡å—ä¸­ä¾èµ–flutteræ¨¡å—äº†ï¼Œå¦‚ï¼š

```groovy
dependencies{
	implementation project(':flutter')
}
```

æ³¨æ„è¿™é‡Œæ˜¯ flutter æ¨¡å—ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬åˆ›å»ºçš„ flutter_moduleã€‚

# ä¸‰ã€åœ¨Androidä¸­è°ƒç”¨Flutter module

åœ¨Javaä¸­è°ƒç”¨Flutter æ¨¡å—æœ‰ä¸¤ç§æ–¹å¼ï¼š

* ä½¿ç”¨ FlutterView çš„æ–¹å¼
* ä½¿ç”¨ FlutterActivity çš„æ–¹å¼
* ä½¿ç”¨ FlutterFragment çš„æ–¹å¼

## 1ã€ä½¿ç”¨ FlutterView çš„æ–¹å¼

é€šè¿‡FlutterViewå¼•å…¥Flutteré¡µé¢ï¼Œä»¥å‰æˆ‘ä»¬æ˜¯é€šè¿‡io.flutter.facadeåŒ…ä¸­ **Flutter** ç±»çš„ **createView()** æ–¹æ³•åˆ›å»ºå‡ºä¸€ä¸ª **FlutterView**ï¼Œç„¶åæ·»åŠ åˆ°Activityçš„å¸ƒå±€ä¸­ï¼Œä½†æ˜¯ç”±äº io.flutter.facadeåŒ…çš„**åºŸå¼ƒ**ï¼Œè¯¥æ–¹æ³•å·²ç»æ— æ³•ä½¿ç”¨ã€‚å®˜æ–¹çš„æ–‡æ¡£æœ‰è¯´æ˜ç›®å‰**ä¸æä¾›åœ¨Viewçº§åˆ«å¼•å…¥Flutterçš„ä¾¿æ·API**ï¼Œå› æ­¤å¦‚æœå¯èƒ½çš„è¯ï¼Œæˆ‘ä»¬åº”è¯¥é¿å…ä½¿ç”¨ FlutterViewï¼Œä½†æ˜¯é€šè¿‡FlutterViewå¼•å…¥Flutteré¡µé¢ä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œä»£ç å¦‚ä¸‹ï¼š

```kotlin
// é€šè¿‡FlutterViewå¼•å…¥Flutterç¼–å†™çš„é¡µé¢
val flutterView = FlutterView(this)
val lp = FrameLayout.LayoutParams(
    ViewGroup.LayoutParams.MATCH_PARENT,
    ViewGroup.LayoutParams.MATCH_PARENT
)
val flContainer = findViewById<FrameLayout>(R.id.flutterViewContainer)
flContainer.addView(flutterView, lp)

//  åˆ›å»ºå¼•æ“
val flutterEngine = FlutterEngine(this)
// è®¾ç½®é¡µé¢è·¯ç”±
flutterEngine.navigationChannel.setInitialRoute("1001")
flutterEngine.dartExecutor.executeDartEntrypoint(
    DartExecutor.DartEntrypoint.createDefault()
)
// å…³é”®ä»£ç ï¼Œå°†Flutteré¡µé¢æ˜¾ç¤ºåˆ°FlutterViewä¸­
flutterView.attachToFlutterEngine(flutterEngine)
```

flutter é¡µé¢ä»£ç ï¼š

```dart
/// å•†å“å›¾ç‰‡
class GoodsImagePage extends StatefulWidget {
  const GoodsImagePage({Key? key}) : super(key: key);

  @override
  State<StatefulWidget> createState() => _GoodsImagePageState();
}

class _GoodsImagePageState extends State {
  @override
  Widget build(BuildContext context) {
    return Material(
      child: SizedBox(
        width: double.infinity,
        child: Column(
          children: [
            Text("$_ImageUrl"),
            AspectRatio(
              aspectRatio: 16 / 9,
              child: Image.network("http://pic1.win4000.com/wallpaper/7/57ba6b2a9d75e.jpg",
                fit: BoxFit.cover,
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

## 2ã€ä½¿ç”¨ FlutterActivity çš„æ–¹å¼

è°ƒç”¨ FlutterActivity çš„withNewEngine è·å–å¼•æ“ï¼Œè®¾ç½®flutteré¡µé¢çš„è·¯ç”±ï¼Œè°ƒç”¨buildæ–¹æ³•æ„å»º Intentå¯¹è±¡ï¼Œå°±å¯ä»¥è·³è½¬äº†ã€‚

```kotlin
fun toFlutterPage(view: View) {
    startActivity(FlutterActivity.withNewEngine().initialRoute("/").build(this))
}
```

flutteré¦–é¡µçš„è·¯ç”±è®¾ç½®æˆäº† "/"ï¼Œé€šè¿‡è·¯ç”±å°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„Flutteré¡µé¢ã€‚

flutter é¡µé¢ä»£ç ï¼š

```dart
void main() => runApp(const MyApp());

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      routes: routes,
      initialRoute: "/",
      debugShowCheckedModeBanner: false,
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: const MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}
```



## 3ã€ä½¿ç”¨ FlutterFragment çš„æ–¹å¼

ç”¨ä¸€ä¸ªActivityå»è£… FlutterFragment ï¼š

```kotlin
class AddFlutterWithFragmentActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_add_flutter_with_fragment)
    }

    fun loadFragment(v: View) {
        val beginTransaction = supportFragmentManager.beginTransaction()
        beginTransaction.replace(
            R.id.flContainer,
            FlutterFragment.withNewEngine().initialRoute("1000").build()
        )
        beginTransaction.commit()
    }
}
```

**1000** æ˜¯ ç”¨ Flutter å†™çš„å•†å“åˆ—è¡¨é¡µçš„ è·¯ç”±ã€‚é€šè¿‡è·¯ç”±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„Flutteré¡µé¢ã€‚

```dart
/// æ¨¡æ‹Ÿå•†å“åˆ—è¡¨é¡µ
class GoodsListPage extends StatefulWidget {
  const GoodsListPage({Key? key}) : super(key: key);

  @override
  State<StatefulWidget> createState() => _GoodsListPageState();
}

class _GoodsListPageState extends State {
  final _dataList = [];

  @override
  void initState() {
    super.initState();
    for (int i = 0; i < 20; i++) {
      _dataList.add({
        "name": "å•†å“åç§°-${i + 1}",
        "subName": "å•†å“å‰¯æ ‡é¢˜",
        "price": (100 + i * 10)
      });
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text("Flutter å•†å“åˆ—è¡¨é¡µ")),
      body: Padding(
        padding: const EdgeInsets.only(left: 10, right: 10),
        child: ListView.builder(
          itemCount: _dataList.length,
          itemBuilder: (context, index) {
            return Column(
              children: [
                ListTile(
                  title: Text(_dataList[index]["name"]),
                  subtitle: Text(_dataList[index]["subName"]),
                ),
                const Divider(),
              ],
            );
          },
        ),
      ),
    );
  }
}
```



# å››ã€çƒ­é‡å¯ï¼ˆé‡åŠ è½½ï¼‰

------

å¤§å®¶éƒ½çŸ¥é“æˆ‘ä»¬åœ¨åšFlutterå¼€å‘çš„æ—¶å€™ï¼Œå®ƒå¸¦æœ‰çƒ­é‡å¯/é‡æ–°åŠ è½½çš„åŠŸèƒ½ï¼Œä½†æ˜¯åœ¨æ··åˆå¼€å‘çš„æ—¶å€™Androidé¡¹ç›®ä¸­é›†æˆäº†Flutteré¡¹ç›®ï¼ŒFlutterçš„çƒ­é‡å¯/é‡æ–°åŠ è½½åŠŸèƒ½å¥½åƒå¤±æ•ˆäº†ï¼Œé‚£ä¹ˆæ€ä¹ˆå¯ç”¨æ··åˆå¼€å‘ä¸­Flutterçš„çƒ­é‡å¯/é‡æ–°åŠ è½½å‘¢ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š

### 1ã€æ‰“å¼€ä¸€ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œæˆ–è€…é“¾æ¥ä¸€ä¸ªè®¾å¤‡åˆ°ç”µè„‘ä¸Šï¼›

### 2ã€å…³é—­æˆ‘ä»¬çš„Appï¼Œç„¶ååœ¨æˆ‘ä»¬çš„Flutteræ¨¡å—ä¸­ï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š**flutter attch**ï¼›

**å¦‚æ‰§è¡Œå‘½ä»¤ï¼š**

![image-20220819111224737](https://raw.githubusercontent.com/meiSThub/BlogImage/master/2022image-20220819111224737.png)

> æ³¨æ„ï¼šå¦‚æœé“¾æ¥äº†å¤šä¸ªè®¾å¤‡ï¼Œè¿è¡Œ flutter attach ä¼šæç¤ºä½ é€‰æ‹©ä¸€ä¸ªè®¾å¤‡

![image-20220819111414396](https://raw.githubusercontent.com/meiSThub/BlogImage/master/2022image-20220819111414396.png)

å¯ä»¥åœ¨å‘½ä»¤åé¢æ·»åŠ å‚æ•°ï¼ŒæŒ‡å®šè¿æ¥çš„è®¾å¤‡ï¼š

![image-20220819111500694](https://raw.githubusercontent.com/meiSThub/BlogImage/master/2022image-20220819111500694.png)





### 3ã€è¿è¡Œæˆ‘ä»¬çš„Android App

### 4ã€è¿›å…¥Flutteré¡µé¢ï¼Œåˆ™ä¼šå»ºç«‹è¿æ¥

![image-20220819111955538](https://raw.githubusercontent.com/meiSThub/BlogImage/master/2022image-20220819111955538.png)

â€‹		ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œè¿›å…¥Flutteré¡µé¢ä¹‹åï¼ŒFlutter å°±ä¸æˆ‘ä»¬çš„æ‰‹æœºå»ºç«‹äº†è¿æ¥ã€‚å¹¶æç¤ºæˆ‘ä»¬ä¸€äº›çƒ­é‡å¯çš„å‘½ä»¤ï¼š

> Flutter run key commands.
> r Hot reload. ğŸ”¥ğŸ”¥ğŸ”¥
> R Hot restart.
> h List all available interactive commands.
> d Detach (terminate "flutter run" but leave application running).
> c Clear the screen
> q Quit (terminate the application on the device).		

â€‹	ç»è¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œå°±å¯ä»¥è¿›è¡Œçƒ­é‡å¯/é‡æ–°åŠ è½½äº†ã€‚

**æ³¨æ„ï¼š**rã€Rã€hã€dã€cã€q ç­‰è¿™äº›å‘½ä»¤ï¼Œéƒ½éœ€è¦åœ¨Flutter æ¨¡å—çš„æ§åˆ¶å°ä¸­è¾“å…¥æ‰æœ‰æ•ˆã€‚

# äº”ã€è°ƒè¯•Dartä»£ç 

------

æ··åˆå¼€å‘çš„æ¨¡å¼ä¸‹ï¼Œå¦‚ä½•æ›´å¥½æ›´é«˜æ•ˆçš„è°ƒè¯•æˆ‘ä»¬çš„ä»£ç å‘¢ï¼Ÿå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š

### 1ã€å…³é—­Appï¼ˆè¿™æ­¥å¾ˆå…³é”®ï¼‰

### 2ã€ç‚¹å‡»AndroidStudioçš„ Flutter Attach æŒ‰é’®ï¼ˆéœ€è¦é¦–å…ˆå®‰å…¨Flutter ä¸ Dart æ’ä»¶ï¼‰

æ³¨æ„ï¼Œéœ€è¦åœ¨Flutter module å·¥ç¨‹ä¸­ï¼Œç‚¹å‡» Flutter Attach æŒ‰é’®ï¼Œå¦‚ï¼š

![image-20220819113311135](https://raw.githubusercontent.com/meiSThub/BlogImage/master/2022image-20220819113311135.png)

ç‚¹å‡»Flutter Attach æŒ‰é’®ä¹‹åï¼Œåœ¨å·¥ç¨‹çš„åº•éƒ¨å°±ä¼šå‡ºç°è°ƒè¯•é¢æ¿ï¼š

![image-20220819113428191](https://raw.githubusercontent.com/meiSThub/BlogImage/master/2022image-20220819113428191.png)

ä»æ‰“å°çš„ä¿¡æ¯ä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒFlutter åœ¨ç­‰å¾…è®¾å¤‡çš„è¿æ¥ã€‚

è¿™ä¸ªæ—¶å€™æ‰“å¼€Appä¹‹åï¼Œå°±å¯ä»¥çœ‹åˆ°è°ƒè¯•ä¿¡æ¯äº†ã€‚

### 3ã€å¯åŠ¨Appï¼Œè¿›å…¥Flutteré¡µé¢

å¯åŠ¨Appåï¼Œè¿›å…¥Flutteré¡µé¢ï¼Œå°±å¯ä»¥æ‰“æ–­ç‚¹è¿›è¡Œè°ƒè¯•äº†ã€‚

æ¯”å¦‚åœ¨ç›‘å¬æŒ‰é’®äº‹ä»¶çš„æ—¶å€™ï¼Œæ‰“ä¸€ä¸ªæ–­ç‚¹ï¼Œå°±å¯ä»¥çœ‹åˆ°ç¡®å®è¿›å…¥äº†æ–­ç‚¹æ‹¦æˆªäº†ï¼š

![image-20220819114014064](https://raw.githubusercontent.com/meiSThub/BlogImage/master/2022image-20220819114014064.png)

# å…­ã€å‘å¸ƒåº”ç”¨

------

## 1ã€æ‰“åŒ…

ç”¨Flutterå¼€å‘å¥½APPä¹‹åï¼Œå¦‚ä½•å°†APPå‘å¸ƒä»¥ä¾›ç”¨æˆ·ä½¿ç”¨å‘¢?ä¸€æ¬¾APPçš„å‘å¸ƒæµç¨‹æ— å¤–ä¹:ç­¾åæ‰“åŒ…->å‘å¸ƒåˆ°å„storeè¿™ä¸¤å¤§æ­¥éª¤ã€‚ä¸‹ é¢çš„è¯¾ç¨‹å°†å‘å¤§å®¶åˆ†äº«å¦‚ä½•ç­¾åæ‰“åŒ…ä¸€æ¬¾Flutter APPã€‚

ä¼—æ‰€å‘¨çŸ¥ï¼ŒAndroidè¦æ±‚æ‰€æœ‰ çš„APPéƒ½éœ€è¦è¿›è¡Œæ•°å­—ç­¾ååï¼Œæ‰èƒ½å¤Ÿè¢«å®‰è£…åˆ°ç›¸åº”çš„è®¾å¤‡ä¸Šã€‚ç­¾åæ‰“åŒ…ä¸€ä¸ªAndroid APPå·²ç»æ˜¯æ¯ä¸€ä½Androidå¼€ å‘è€…çš„å®¶å¸¸ä¾¿é¥­äº†ã€‚

é‚£ä¹ˆå¦‚ä½•ç­¾åæ‰“åŒ…- -æ¬¾ç”¨Flutterå¼€å‘çš„APPå‘¢?

## 2ã€ç¬¬ä¸€æ­¥:ç”ŸæˆAndroidç­¾åè¯ä¹¦

å¦‚æœä½ å·²ç»æœ‰ç­¾åè¯ä¹¦å¯ä»¥ç»•è¿‡æ­¤æ­¥éª¤ã€‚ç­¾åAPKéœ€è¦ä¸€ä¸ªè¯ä¹¦ç”¨äºä¸ºAPPç­¾åï¼Œç”Ÿæˆç­¾åè¯ä¹¦å¯ä»¥Android Studioä»¥å¯è§†åŒ–çš„æ–¹å¼ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç»ˆç«¯é‡‡ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼ç”Ÿæˆï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡ŒGoogleè¿™é‡Œä¸å†æ•–è¿°ã€‚

## 3ã€ç¬¬äºŒæ­¥:è®¾ç½®gradleå˜é‡

1. å°†ä½ çš„ç­¾åè¯ä¹¦copyåˆ°android/appç›®å½•ä¸‹ã€‚

2. ç¼–è¾‘~/ .gradle/gradle. propertiesæˆ–../android/gradle. properties(-ä¸€ä¸ªæ˜¯å…¨å±€
   gradle. propertiesï¼Œä¸€ä¸ªæ˜¯é¡¹ç›®ä¸­çš„gradle. propertiesï¼Œå¤§å®¶å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹)ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç :

   ```
   MYAPP_ RELEASE_ _STORE_ FILE=your keystore filename
   MYAPP_ RELEASE_ _KEY_ _ALIAS=your keystore alias
   MYAPP_ RELEASE_ _STORE_ _PASSWORD= =
   MYAPP_ RELEASE_ _KEY_ PASSWORD=*****
   ```

   æç¤º: ç”¨æ­£ç¡®çš„è¯ä¹¦å¯†ç ã€aliasä»¥åŠkeyå¯†ç æ›¿æ¢æ‰ .

## 4ã€ç¬¬ä¸‰æ­¥ï¼šåœ¨Appçš„build.gradle é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å‰é¢é…ç½®

![image-20220819115622224](https://raw.githubusercontent.com/meiSThub/BlogImage/master/2022image-20220819115622224.png)

## ç¬¬äº”æ­¥ï¼šæ‰“ç­¾åAPK

![image-20220819115842058](https://raw.githubusercontent.com/meiSThub/BlogImage/master/2022image-20220819115842058.png)







# å‚è€ƒï¼š

* [Flutteræ¥å…¥å®‰å“é¡¹ç›®å®æˆ˜](https://www.codenong.com/js7eee7768dfca/)
* [åœ¨ç°æœ‰ Android åº”ç”¨ä¸Šé«˜æ•ˆå¼€å‘ Flutter](https://medium.com/flutter-community/efficiently-develop-flutter-on-android-113176326bad)
* [Flutterå‘½ä»¤è¯¦è§£](https://www.myfreax.com/detailed-flutter-command/)

